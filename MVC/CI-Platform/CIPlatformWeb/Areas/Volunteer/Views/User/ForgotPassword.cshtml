@model IEnumerable<BannerVM>
@{
    ViewData["Title"] = "Forgot Password | CI Platform";
}
<section class="d-flex flex-column flex-lg-row gap-2 gap-lg-0 min-vh-100">
    <partial name="_HeroBanner" model="Model"/>
    <div class="right-section d-flex flex-column align-items-center justify-content-center flex-shrink-0 p-5">
        <partial name="_FormMessage" />
        <div class="form-wrapper d-flex flex-column align-items-center justify-content-center mt-auto">
            <h4 class="form-title">Forgot Password</h4>
            <span class="form-subtitle text-light-custom text-center">
                Enter your email address you've using for your account below and we will send you a password reset link
            </span>
            <form class="text-center" asp-route="ForgotPasswordPostV1" method="POST" onsubmit="return EmailCheck()">
                <div class="alert alert-danger font-15" asp-validation-summary="ModelOnly"></div>
                <div class="form-group m-4 text-start">
                    <label for="email" class="input-label text-light-custom">Email address</label>
                    <input type="email" class="form-control custom-input" value='@TempData["UserEmail"]' name="email" id="email" placeholder="Enter your email address">
                    <span class="text-danger font-13 d-none" id="email-error">Please enter valid email address!</span>
                </div>
                <button class="btn mx-auto mt-4 mt-md-0 btn-login" type="submit">Reset my Password</button>
            </form>
            <div class="d-flex flex-column gap-2 justify-content-center align-items-center">
                <a asp-controller="User" asp-action="Login" class="mt-2 login-link-text text-light-custom">Login</a>
                <a asp-controller="User" asp-action="ForgotPassword" class="login-link-text fw-light">Lost your password?</a>
            </div>
        </div>
        <a class="login-help-text text-light-custom mt-auto" asp-controller="Home" asp-action="Privacy">Privacy Policy</a>
    </div>
</section>
<script>
    const email = document.querySelector('#email');
    const emailError = document.querySelector('#email-error');
    let regex = /^[a-zA-Z0-9.!#$%&’*+/=?^_`{|}~-]+@@[a-zA-Z0-9-]+(?:\.[a-zA-Z0-9-]{2,4})+$/;
    let isEmailValid = false;
    
    function EmailCheck()
    {
        console.log(isEmailValid);
        if(! isEmailValid)
        {
            emailError.classList.remove("d-none");
            event.preventDefault();
        }
        else isEmailValid;
    }
    email.addEventListener( 
        'input',
        () =>
        {
            let value = email.value;
            isEmailValid = regex.test(value)
            if(isEmailValid)
            {
                emailError.classList.add("d-none");
            }
            else
            {
                emailError.classList.remove("d-none");
            }
        }
    );
</script>